<?xml version="1.0" encoding="utf-8" ?>
<project name="Special Education Configuration">
	<scriptdbdata
		ConnectionString="${connection}"
		DeleteObsoleteRecords="false"
		OutputFile="${outputfile}"
		Tables="Program[Id='${program}'],FormTemplate[ProgramId='${program}'],FormTemplateFormInterval[TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}')],FormTemplateControl[ID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}'))],SubjectFormInputArea[ID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}'))],FormTemplateLayout[TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}')],FormTemplateControlFormInterval[ControlID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}'))],FormTemplateControlProperty[ControlID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}'))],FormTemplateInputItem[InputAreaID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}'))],FormTemplateInputSelectField[ID IN (SELECT ID FROM FormTemplateInputItem WHERE InputAreaID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}')))],FormTemplateInputEnumField[ID IN (SELECT ID FROM FormTemplateInputItem WHERE InputAreaID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}')))],FormTemplateInputSelectFieldOption[FormInstanceID IS NULL AND SelectFieldID IN (SELECT ID FROM FormTemplateInputItem WHERE InputAreaID IN (SELECT ControlId FROM FormTemplateLayout WHERE TemplateID IN (SELECT ID FROM FormTemplate WHERE ProgramId='${program}')))],PrgStatus[ProgramId='${program}'],PrgItemDef[ProgramId='${program}'],PrgItemOutcome[CurrentDefID IN (SELECT ID FROM PrgItemDef WHERE ProgramId='${program}')],PrgTrigger,PrgItemRelDef[InitiatingItemDefID IN (SELECT ID FROM PrgItemDef WHERE ProgramId='${program}')],PrgActivityReason[DefId IN (SELECT ID FROM PrgItemDef WHERE ProgramId='${program}')],PrgSectionDef[ItemDefId IN (SELECT ID FROM PrgItemDef WHERE ProgramId='${program}')],IepPostSchoolConsiderationsSectionDef[ID in (select ID from PrgSectionDef where ItemDefID in (SELECT ID FROM PrgItemDef WHERE ProgramId='${program}'))],IepAccomodationsSectionDef,PrgConsentOutcome,PrgMilestoneDef[ProgramId='${program}'],PrgVariant[ProgramId='${program}'],PrgSubVariant[VariantID IN (SELECT ID FROM PrgVariant WHERE ProgramId='${program}')],PrgProbeTypeSubVariant[SubVariantID IN (SELECT ID FROM PrgSubVariant WHERE VariantID IN (SELECT ID FROM PrgVariant WHERE ProgramID='${program}'))],PrgFilter[ProgramID='${program}'],PrgRule[FilterID IN (SELECT ID FROM PrgFilter WHERE ProgramID='${program}')],FileData[ID IN (SELECT TemplateFileID FROM PrgDocumentDef WHERE ItemDefId IN (SELECT ID FROM PrgItemDef WHERE ProgramID='${program}'))],IepSpecialFactorDef,PrgDocumentDef[ItemDefId IN (SELECT ID FROM PrgItemDef WHERE ProgramID='${program}')],PrgDocumentInput[DefId IN (SELECT ID FROM PrgDocumentDef WHERE ItemDefId IN (SELECT ID FROM PrgItemDef WHERE ProgramID='${program}'))],IepLanguage,IepGraduationType,IepPostSchoolAreaDef,IepPostSchoolCourseDef,IepPostSchoolAgencyDef,IepPostSchoolServiceDef,IepAccomodationCategory,IepAccomodationDef,IepEsyCriterionDef,IepGoalArea,PrgGoalProgressFreq,IepTestDef,IepTestParticipationDef,IepTestAccomCategory,IepTestAccomDef,IepAllowedTestAccom,IepAllowedTestParticipation,IepJustificationDef,IepJustificationCriterion,ServiceDef,IepServiceDef,IepPlacementType,IepPlacementOption,IepDisability,PrgGoalProgressStatus"
		PreBatchSQL="ALTER TABLE [dbo].[FormTemplateInputItem] DROP CONSTRAINT [FK_FormTemplateInputItem#ShowIfOption#]; ALTER TABLE [dbo].[FormTemplate] DROP CONSTRAINT [FK_FormTemplate#LastModifiedUser#]; ALTER TABLE [dbo].[PrgItemDef] DROP CONSTRAINT [FK_PrgItemDef#LastModifiedUser#];set nocount on;"
		PostBatchSQL="set nocount off;ALTER TABLE [dbo].[FormTemplateInputItem]  WITH CHECK ADD  CONSTRAINT [FK_FormTemplateInputItem#ShowIfOption#] FOREIGN KEY([ShowIfOptionId]) REFERENCES [dbo].[FormTemplateInputSelectFieldOption] ([ID]); UPDATE f SET LastModifiedUserID = 'EEE133BD-C557-47E1-AB67-EE413DD3D1AB' FROM FormTemplate f LEFT JOIN UserProfile u ON f.LastModifiedUserID = u.ID WHERE u.ID IS NULL; ALTER TABLE [dbo].[FormTemplate] WITH CHECK ADD CONSTRAINT [FK_FormTemplate#LastModifiedUser#] FOREIGN KEY([LastModifiedUserID]) REFERENCES [dbo].[UserProfile] ([ID]); UPDATE i SET LastModifiedUserID = 'EEE133BD-C557-47E1-AB67-EE413DD3D1AB' FROM PrgItemDef i LEFT JOIN UserProfile u ON i.LastModifiedUserID = u.ID WHERE u.ID IS NULL; ALTER TABLE [dbo].[PrgItemDef] WITH CHECK ADD CONSTRAINT [FK_PrgItemDef#LastModifiedUser#] FOREIGN KEY([LastModifiedUserID]) REFERENCES [dbo].[UserProfile] ([ID]);" />
</project>
